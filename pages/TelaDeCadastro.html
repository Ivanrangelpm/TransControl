<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles/Cadastro1.css">
    <link rel="shortcut icon" href="../img/LogoSEMescrita.png" type="image/x-icon">
    <title>TransControl | Cadastro Cliente</title>
  </head>
  <body>
    <header>
      <a href="index.html"><img src="../img/LogoSEMescrita.png" alt="Logo da Empresa"></a>
      <div class="itemsHeader">
        <h4><a href="index.html">Início</a></h4>
        <h4><a href="index.html#sobre-nos">Sobre Nós</a></h4>
        <h4><a href="../Calculadora Financeiraa/Calculadora/calculadora.html">Simulador Financeiro</a></h4>
        <h4>||</h4>
        <buttonn class="botao" onclick="opcaoHeader()"></buttonn>
      </div>
    </header>
    <div class="background">
      <div class="underheader">
        <div id="options" class="options">
          <a href="login.html">Login</a>
          <a href="TelaDeCadastro.html">Cadastro</a>
        </div>
      </div>
      <div class="container">
        <div class="Cadastro">
          <h2>Cadastro</h2>
          <div id="cadastroForm">
            Nome: <br>
            <input type="text" id="ipt_nome" placeholder="Nome"> <br>
            Email: <br>
            <input type="email" id="ipt_email" placeholder="Email"> <br>
            Senha: <br>
            <input type="password" id="ipt_senha" placeholder="Senha"> <br>
            Confirmar Senha: <br>
            <input type="password" id="ipt_senhaConfirm" placeholder="Confirmar Senha">
            <br>
            Chave de Acesso:
            <input type="text" id="ipt_chave" placeholder="Chave de Acesso">
            <br>
            <button onclick="validarFormulario()">Cadastrar</button>
            <a href="TelaDeCadastroEMPRESA.html" class="link"> É uma Empresa? Cadastre-se aqui!</a>
          </div>
        </div>
      </div>
    </div>
    <!-- <footer>
      <div class="footer">
        <div class="container">
          <p>Feito por TransControl - SPTECH - 1CCO &copy;</p>
        </div>
      </div>
    </footer> -->

    <script>
      function opcaoHeader() {
        var options = document.getElementById("options");
        if (options.style.display === "block") {
          options.style.display = "none";
        } else {
          options.style.display = "block";
        }
      }

      function validarFormulario() {
        var email = ipt_email.value;
        var senha = ipt_senha.value;
        var confirmarSenha = ipt_senhaConfirm.value;
        var chaveAcesso = Number(ipt_chave).value;

        var erro = false

        if (email.indexOf("@") === -1) {
          erro = true
        }

        if (senha.length <= 8) {
          erro = true
        }

        var possuiCaractereEspecial = false;
        var possuiNumero = false;
        var caracteresEspeciais = "!@#$%^&*()-_+=[]{}|;:',.<>?";

        for (var i = 0; i <= senha.length; i++) {
          var caractere = senha[i];

          if (caracteresEspeciais.indexOf(caractere) !== -1) {
            possuiCaractereEspecial = true;
          }
          if (!isNaN(parseInt(caractere))) {
            possuiNumero = true;
          }
        }
        if (!possuiCaractereEspecial || !possuiNumero) {
          erro = true;
        }

        if (senha !== confirmarSenha) {
          erro = true;
        }

        if(erro == false){
          alert("Cadastro realizado com sucesso!");
          window.location.href = "login.html";
        } else if(email.indexOf("@") === -1){
          alert("O e-mail deve conter um @");
        } else if(senha.length <= 8){
          alert("A senha deve ter pelo menos 8 caracteres");
        } else if(!possuiCaractereEspecial || !possuiNumero){
          alert(
            "A senha deve conter pelo menos 1 caractere especial e 1 número"
          );
        } else if(senha !== confirmarSenha){
          alert("As senhas não coincidem"); 
        }
      }
    </script>
  </body>
</html>
