<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles/Cadastro2.css">
    <link rel="shortcut icon" href="../img/LogoSEMescrita.png" type="image/x-icon">
    <title>TransControl | Cadastro Empresa</title>
  </head>
  <body>
    <header>
      <a href="index.html"><img src="../img/LogoSEMescrita.png" alt="Logo da Empresa"></a>
      <div class="itemsHeader">
        <h4><a href="index.html">Início</a></h4>
        <h4><a href="index.html#sobre-nos">Sobre Nós</a></h4>
        <h4><a href="../Calculadora Financeiraa/Calculadora/calculadora.html">Simulador Financeiro</a></h4>
        <h4>||</h4>
        <button class="botao" onclick="opcaoHeader()"></button>
      </div>
    </header>
    <div class="background">
      <div class="underheader">
        <div id="options" class="options">
          <a href="login.html">Login</a>
          <a href="TelaDeCadastro.html">Cadastro</a>
        </div>
      </div>
      <div class="container">
        <div class="Cadastro">
          <h2 style="text-align: center">Cadastro Empresa</h2>
          <form id="cadastroForm">
            <div class="input-container">
              Razão Social: <br>
              <input type="text" id="ipt_razao" placeholder="Razão Social">
            </div>
            <div class="input-container">
              Nome: <br>
              <input type="text" id="ipt_nome" placeholder="Nome">
            </div>
            <div class="input-container">
              CNPJ: <br>
              <input type="number" id="ipt_cnpj" placeholder="CNPJ">
            </div>
            <div class="input-container">
              Email: <br>
              <input type="text" id="ipt_email" placeholder="Email">
            </div>
            <div class="input-container">
              Logradouro: <br>
              <input type="text" id="ipt_logradouro" placeholder="Logradouro">
            </div>
            <div class="input-container">
              Telefone: <br>
              <input type="number" id="ipt_telefone" placeholder="Telefone">
            </div>
            <div class="input-container">
              Senha: <br>
              <input type="password" id="ipt_senha" placeholder="Senha">
            </div>
            <div class="input-container">
              Chave Única: <br>
              <input type="number" id="ipt_chaveUnica" placeholder="Chave Única">
            </div>
            <button onclick="validarFormulario()">Cadastrar</button>
          </form>
        </div>
      </div>
    </div>
    <footer>
      <div class="footer">
        <div class="container">
          <p>Feito por TransControl - SPTECH - 1CCO &copy;</p>
        </div>
      </div>
    </footer>

    <script>
      function opcaoHeader() {
        var options = document.getElementById("options");
        if (options.style.display === "block") {
          options.style.display = "none";
        } else {
          options.style.display = "block";
        }
      }

      function validarFormulario() {
        var razaoSocial = ipt_razao.value;
        var nome = ipt_nome.value;
        var cnpj = Number(ipt_cnpj.value);
        var email = ipt_email.value;
        var logradouro = ipt_logradouro.value;
        var telefone = Number(ipt_telefone.value);
        var senha = ipt_senha.value;
        var chaveUnica = Number(ipt_chaveUnica.value);

        var erro = false

        if (razaoSocial === "") {
          erro = true
        }

        if (nome === "") {
          erro = true
        }

        if (cnpj === "") {
          erro = true
        }

        if (email === "" || email.indexOf("@") === -1) {
          erro = true
        }

        if (logradouro === "") {
          erro = true
        }

        if (telefone === "") {
          erro = true
        }

        if (senha === "" || senha.length <= 8) {
          erro = true
        }

        var possuiCaractereEspecial = false;
        var possuiNumero = false;
        var caracteresEspeciais = "!@#$%^&*()-_+=[]{}|;:',.<>?";

        for (var i = 0; i < senha.length; i++) {
          var caractere = senha[i];

          if (caracteresEspeciais.indexOf(caractere) !== -1) {
            possuiCaractereEspecial = true;
          }
          if (!isNaN(parseInt(caractere))) {
            possuiNumero = true;
          }
        }

        if (!possuiCaractereEspecial || !possuiNumero) {
          erro = true
        }

        if (chaveUnica === "") {
          erro = true
        }

        if(erro == true){
          alert("Cadastro realizado com sucesso!");
          window.location.href = "login.html";
        } else if(razaoSocial === ""){
          alert("Campo obrigatório");
        } else if(nome === ""){
          alert("Campo obrigatório");
        } else if(cnpj === ""){
          alert("CNPJ inválido");
        } else if(email === "" || email.indexOf("@") === -1){
          alert("Email inválido");
        } else if(logradouro === ""){
          alert("Campo obrigatório");
        } else if(telefone === ""){
          alert("Campo obrigatório");
        } else if(senha === "" || senha.length <= 8){
          alert("Senha inválida! Deve ter pelo menos 8 caracteres");
        } else if(!possuiCaractereEspecial || !possuiNumero){
          alert(
            "A senha deve conter pelo menos 1 caractere especial e 1 número"
          );
        } else if(chaveUnica === ""){
          alert("Chave Única inválida");
        }
      }
    </script>
  </body>
</html>
