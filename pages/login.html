<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>TransControl | Login</title>
    <link rel="stylesheet" href="./styles/login.css" />
    <link
      rel="shortcut icon"
      href="../img/LogoSEMescrita.png"
      type="image/x-icon"
    />
  </head>
  <body>
    <header>
      <a href="../index.html"
        ><img src="../img/LogoSEMescrita.png" alt="Logo da Empresa"
      /></a>
      <div class="itemsHeader">
        <h4><a href="../index.html">Início</a></h4>
        <h4><a href="../index.html#sobre-nos">Sobre Nós</a></h4>
        <h4>||</h4>
        <buttonn class="botao" onclick="opcaoHeader()"></buttonn>
      </div>
    </header>
    <div class="background">
      <div class="underheader">
        <div id="options" class="options">
          <a href="login.html">Login</a>
          <a href="TelaDeCadastro1.html">Cadastro</a>
        </div>
      </div>
      <div class="container">
        <div class="login">
          <h2>Login</h2>
          <input id="ipt_email" type="text" placeholder="E-mail" required />
          <input id="ipt_senha" type="password" placeholder="Senha" required />
          <input
            id="ipt_confirmaSenha"
            type="password"
            placeholder="Confirme a senha"
            required
          />
          <button id="botaoEnviar" onclick="validarFormulario()">Entrar</button>
          <a href="TelaDeCadastro1.html" class="link">Ainda não tem login?</a>
        </div>
      </div>
    </div>
    <footer>
      <div class="footer">
        <div class="container">
          <p>Feito por TransControl - SPTECH - 1CCO &copy;</p>
        </div>
      </div>
    </footer>
    <script>
      var maxTentativas = 3;
      var tentativas = 0;

      function opcaoHeader() {
        var options = document.getElementById("options");
        if (options.style.display === "block") {
          options.style.display = "none";
        } else {
          options.style.display = "block";
        }
      }

      function validarFormulario() {
		var email = ipt_email.value
        var senha = ipt_senha.value
        var confirmarSenha = ipt_confirmaSenha.value

        tentativas++;

        for (var i = 0; i < maxTentativas; i++) {
          if (email.indexOf("@") === -1) {
            alert("O e-mail deve conter um @");
            if (tentativas === maxTentativas) {
              desabilitarFormulario();
            }
            return false;
          }


          if (senha !== confirmarSenha) {
            alert("As senhas não coincidem");
            if (tentativas === maxTentativas) {
              desabilitarFormulario();
            }
            return false;
          }
        }

        alert("Login realizado com sucesso!");
        window.location.href = "../index.html";

        return true;
      }

      function desabilitarFormulario() {
        var campoEmail = document.getElementById("ipt_email");
        var campoSenha = document.getElementById("ipt_senha");
        var campoConfirmarSenha = document.getElementById("ipt_confirmaSenha");
        var botaoEnviar = document.getElementById("botaoEnviar");

        campoEmail.disabled = true;
        campoSenha.disabled = true;
        campoConfirmarSenha.disabled = true;
        botaoEnviar.disabled = true;

        alert(
          "Você excedeu o número máximo de tentativas de login. Tente novamente mais tarde."
        );
      }
    </script>
  </body>
</html>
